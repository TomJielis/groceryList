import{f as k,r as w,c as n,o as i,v as B,a as s,x as S,i as _,B as V,j as N,g as M,C as U,F as q,h as z,b as G,t as x,m as y,A as m}from"./CXT9O0q4.js";import{u as C}from"./kpxKKGzK.js";const O={class:"mt-6 max-w-md mx-auto px-4"},R=k({__name:"ListForm",emits:["list-added"],setup(L,{emit:c}){const d=c,{createList:u}=C();let r=w("");async function b(){u(r.value.trim()),r.value="",d("list-added")}return(f,h)=>(i(),n("div",O,[B(s("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=p=>V(r)?r.value=p:r=p),placeholder:"Enter new list",class:"w-full mb-3 px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 text-base"},null,512),[[S,_(r)]]),s("button",{class:"w-full py-3 rounded-xl bg-blue-500 text-white font-semibold text-base shadow-md hover:bg-blue-600 active:scale-[0.98] transition",onClick:b}," ➕ Create List ")]))}}),T={class:"max-w-sm p-4"},W={key:0},Y={class:"space-y-3"},H=["onClick"],J={class:"text-base font-medium break-words whitespace-normal"},K=["onClick"],P={class:"relative ml-2"},Q=["onClick"],X={key:0,class:"dropdown-menu absolute right-0 top-12 z-20 w-40 bg-white border rounded-xl shadow-lg"},Z=["onClick"],I=["onClick"],ee=["onClick"],te={key:1},ne=k({__name:"lists",async setup(L){let c,d;const u=N(),r=C(),{lists:b,fetchLists:f,favorite:h,shareList:p,deleteList:$}=r,v=w(!1),a=w(null);[c,d]=M(()=>f()),await c,d();async function A(){v.value=!1,await f()}function D(t){a.value=a.value===t?null:t}function g(t){const o=document.querySelectorAll(".dropdown-menu");let e=!1;o.forEach(l=>{l.contains(t.target)&&(e=!0)}),e||(a.value=null)}U(a,t=>{t!==null?document.addEventListener("click",g):document.removeEventListener("click",g)});function E(t){confirm("Are you sure you want to delete this list?")&&$(t).then(f)}function F(t){const o=prompt("Enter email to share the list with:");o&&p(t,o).then(()=>alert("List shared!"))}function j(t){h(t),alert("List favorited!")}return(t,o)=>(i(),n("div",T,[o[1]||(o[1]=s("h1",{class:"text-xl font-bold mb-4 text-center"},"📋 Your grocery lists",-1)),v.value?(i(),n("div",te,[G(R,{onListAdded:A})])):(i(),n("div",W,[s("ul",Y,[(i(!0),n(q,null,z(_(b),e=>(i(),n("li",{key:e.id,class:"flex items-center justify-between bg-white rounded-xl shadow-sm p-3 active:shadow-md transition relative"},[s("div",{class:"flex-1 cursor-pointer",onClick:l=>t.$router.push(`/list/${e.id}`)},[s("span",J,x(e.name),1)],8,H),s("div",{class:"ml-3 text-xs font-medium bg-green-100 text-green-700 px-3 py-1 rounded-full",onClick:l=>t.$router.push(`/list/${e.id}`)},x(e.grocery_list_items_checked_count)+"/"+x(e.grocery_list_items_count),9,K),s("div",P,[s("button",{class:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 text-gray-600 active:bg-gray-200",onClick:m(l=>D(e.id),["stop"])}," ⋮ ",8,Q),a.value===e.id?(i(),n("div",X,[s("button",{class:"block w-full text-left px-4 py-3 hover:bg-gray-100",onClick:m(l=>j(e.id),["stop"])}," ⭐ Favorite ",8,Z),e.created_by==_(u).user.id?(i(),n("button",{key:0,class:"block w-full text-left px-4 py-3 hover:bg-gray-100",onClick:m(l=>F(e.id),["stop"])}," 👥 Share ",8,I)):y("",!0),e.created_by==_(u).user.id?(i(),n("button",{key:1,class:"block w-full text-left px-4 py-3 text-red-600 hover:bg-red-100",onClick:m(l=>E(e.id),["stop"])}," 🗑️ Delete ",8,ee)):y("",!0)])):y("",!0)])]))),128))]),s("button",{class:"fixed bottom-6 right-6 bg-blue-500 text-white w-14 h-14 flex items-center justify-center rounded-full shadow-lg hover:bg-blue-600 active:scale-95 transition",style:{"padding-bottom":"env(safe-area-inset-bottom)"},onClick:o[0]||(o[0]=e=>v.value=!0)}," ➕ ")]))]))}});export{ne as default};
